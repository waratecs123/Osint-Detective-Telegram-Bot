import telebot
import requests
from files import sites

TOKEN = "8301891473:AAGs1DQQb5opIX-tM1yXBriG_pVVnIm12Pk"
bot = telebot.TeleBot(TOKEN)

def split_message(text, max_length=4096):
    return [text[i:i+max_length] for i in range(0, len(text), max_length)]

@bot.message_handler(commands=['start', 'help'])
def welcome(message):
    bot.reply_to(message, text="üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ OSINT Detective Bot!\n\n"
                               "–Ø –≤–∞—à AI-–ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø–æ–∏—Å–∫—É –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.\n"
                               "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å:\n\n"
                               "üîé –ü–æ–∏—Å–∫–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã\n"
                               "/username [–Ω–∏–∫–Ω–µ–π–º] ‚Äì –ù–∞–π—Ç–∏ –ø—Ä–æ—Ñ–∏–ª–∏ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö, –Ω–∞ —Ñ–æ—Ä—É–º–∞—Ö –∏ –≤ –∏–≥—Ä–∞—Ö.\n\n"
                               "üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã\n"
                               "/report ‚Äì –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å TXT –æ—Ç—á–µ—Ç –æ –≤–∞—à–∏—Ö –Ω–∞—Ö–æ–¥–∫–∞—Ö.\n\n"
                               "‚öôÔ∏è –£—Ç–∏–ª–∏—Ç—ã"
                               "/help ‚Äì –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ –º–µ–Ω—é.\n"
                               "/legal ‚Äì –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —ç—Ç–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.\n\n"
                               "üìå –ü—Ä–∏–º–µ—Ä:\n"
                               "/username john_doe\n\n"
                               "–Ø —Å–æ–±–ª—é–¥–∞—é –∑–∞–∫–æ–Ω—ã –æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏—á–Ω–æ!\n"
                               "–ù–∞—á–Ω–µ–º —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ\n")

@bot.message_handler(commands=['username'])
def find_username(message):
    mes = message.text.split()
    if len(mes) < 2:
        bot.reply_to(message, "–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω—É—é –∫–æ–º–∞–Ω–¥—É!\n\n"
                              "–ü—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã:\n"
                              "/username <–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>")
    else:
        bot.reply_to(message, f"–ë–æ—Ç –Ω–∞—á–∞–ª –ø–æ–∏—Å–∫, –æ–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç! (—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ ")

        nickname = mes[1]
        headers = {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
        }

        i = 0
        lst = []
        txt_file = "report.txt"

        for key, value in sites.items():
            i += 1
            try:
                site = f"{value}{nickname}"
                response = requests.get(site, headers=headers, timeout=10)
                if response.status_code == 200:
                    result = f"{i}. {key} - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω\n–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å:\n{site}\n"
                    lst.append(result)
                    print(result)
                else:
                    result = f"{i}. {key} - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω\n"
                    lst.append(result)
            except requests.exceptions.ConnectionError:
                result = f"{i}. {key}: –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è - —Å–∞–π—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ\n"
                lst.append(result)
                print(result)
            except requests.exceptions.ReadTimeout:
                result = f"{i}. {key}: –û—à–∏–±–∫–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ - —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è\n"
                lst.append(result)
                print(result)
            except requests.exceptions.InvalidURL:
                result = f"{i}. {key}: –û—à–∏–±–∫–∞ —Å—Å—ã–ª–∫–∏ - url-–∞–¥—Ä–µ—Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π\n"
                lst.append(result)
                print(result)

        with open(txt_file, 'w', encoding='utf-8') as f:
            f.write("–û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω!\n–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:\n\n")
            f.write("\n\n".join(lst))

        print(f"TXT —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω: {txt_file}")

        text_1 = "–û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω!\n–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:\n\n"
        answer = "\n".join(lst)
        final_answer = f"{text_1}{answer}"
        final_answer_1 = split_message(final_answer)

        for f_an in final_answer_1:
            bot.reply_to(message, f_an)

@bot.message_handler(commands=["legal"])
def legal_text(message):
    bot.reply_to(message, "–ü–†–ê–í–ò–õ–ê –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û–°–¢–ò –í –°–ï–¢–ò! üåê\n\n"
                          "1Ô∏è‚É£–ë–µ—Ä–µ–≥–∏ —Å–≤–æ–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!\n\n"
                          "–ù–µ –≤—ã–∫–ª–∞–¥—ã–≤–∞–π –≤ –æ—Ç–∫—Ä—ã—Ç—ã–π –¥–æ—Å—Ç—É–ø —Å–≤–æ–π –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å, –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã.\n"
                          "–ú–æ—à–µ–Ω–Ω–∏–∫–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é! –ï—Å–ª–∏ —Å–∞–π—Ç —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏ ‚Äî –ø—Ä–æ–≤–µ—Ä—å –µ–≥–æ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å.\n\n"
                          "2Ô∏è‚É£–°–æ–∑–¥–∞–≤–∞–π –Ω–∞–¥—ë–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏!\n\n"
                          "–ü—Ä–æ—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏ –≤—Ä–æ–¥–µ ¬´123456¬ª –∏–ª–∏ ¬´password¬ª –≤–∑–ª–∞–º—ã–≤–∞—é—Ç –∑–∞ —Å–µ–∫—É–Ω–¥—ã!\n"
                          "–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏–∑ –±—É–∫–≤, —Ü–∏—Ñ—Ä –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤.\n"
                          "–í–∫–ª—é—á–∏ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (2FA) ‚Äî —ç—Ç–æ –¥–æ–±–∞–≤–∏—Ç –∑–∞—â–∏—Ç—É.\n\n"
                          "3Ô∏è‚É£–û—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ —Å –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–∞–º–∏!\n\n"
                          "–ï—Å–ª–∏ —Ç–µ–±–µ –ø–∏—à–µ—Ç —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã –Ω–µ –∑–Ω–∞–µ—à—å, ‚Äî –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏ –ø–æ –µ–≥–æ —Å—Å—ã–ª–∫–∞–º –∏ –Ω–µ —Å–∫–∞—á–∏–≤–∞–π —Ñ–∞–π–ª—ã.\n"
                          "–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∏—Ä—É—Å –∏–ª–∏ —Ñ–∏—à–∏–Ω–≥!\n"
                          "–õ—É—á—à–µ —Å—Ä–∞–∑—É –±–ª–æ–∫–∏—Ä—É–π –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.\n\n"
                          "4Ô∏è‚É£–ù–∞—Å—Ç—Ä–æ–π –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö!\n\n"
                          "–û–≥—Ä–∞–Ω–∏—á—å –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º –ø–æ—Å—Ç–∞–º –∏ —Ñ–æ—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –¥—Ä—É–∑–µ–π.\n"
                          "–û—Ç–∫–ª—é—á–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –≤ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö –∏ –Ω–µ –æ—Ç–º–µ—á–∞–π —Å–≤–æ–π –¥–æ–º –Ω–∞ –∫–∞—Ä—Ç–∞—Ö.\n"
                          "–ß–µ–º –º–µ–Ω—å—à–µ –ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Å–µ—Ç–∏ ‚Äî —Ç–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ!\n\n"
                          "5Ô∏è‚É£–û–±–Ω–æ–≤–ª—è–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –∏–∑–±–µ–≥–∞–π –ø–∏—Ä–∞—Ç—Å–∫–æ–≥–æ —Å–æ—Ñ—Ç–∞!\n\n"
                          "–í–∏—Ä—É—Å—ã —á–∞—Å—Ç–æ –ø—Ä—è—á—É—Ç—Å—è –≤ –≤–∑–ª–æ–º–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.\n"
                          "–í—Å–µ–≥–¥–∞ —Å–∫–∞—á–∏–≤–∞–π —Å–æ—Ñ—Ç —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –∏ —Å—Ç–∞–≤—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.\n")

@bot.message_handler(commands=["report"])
def make_report(message):
    try:
        with open("report.txt", "rb") as file:
            bot.reply_to(message, "–§–∞–π–ª –æ—Ç—á—ë—Ç–∞ –ø–æ –ø–æ–∏—Å–∫—É —Å–æ–∑–¥–∞–Ω!")
            bot.send_document(message.chat.id, file)
    except FileNotFoundError:
        bot.reply_to(message, "–û—Ç—á–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–∏—Å–∫ —Å –ø–æ–º–æ—â—å—é /username")

bot.polling(none_stop=True)